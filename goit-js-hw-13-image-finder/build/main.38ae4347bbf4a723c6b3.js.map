{"version":3,"sources":["webpack:///./form.hbs","webpack:///./index.js","webpack:///./apiService.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","queryText","search","currentPage","callback","fetch","SEARCH","then","response","json","catch","error","refs","body","document","querySelector","innerHTML","form","gallery","searchForm","loadButton","numberPage","toDo","images","hits","length","delay","markupList","reduce","acc","el","webformatURL","largeImageURL","likes","views","comments","downloads","insertAdjacentHTML","markup","classList","add","window","scrollBy","innerHeight","addEventListener","api","debounce","target","value","dataset","large","basicLightbox","show"],"mappings":"gFAAA,IAAIA,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,SAAW,CAAC,EAAE,YAAY,KAAO,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GACzI,MAAO,+LACT,SAAU,K,uDCcRC,E,qBCbW,G,wCAAA,SAASC,EAAQC,EAAaC,GAWzCC,MATIC,yEAEAH,EACA,MACAD,EACA,uDAKCK,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAP,GAAI,OAAII,EAASJ,MACtBU,OAAM,SAAAC,GAAK,OAAIA,O,mEDTlBC,EAAO,CACTC,KAAMC,SAASC,cAAc,QAC7BnB,UAAYkB,SAASC,cAAc,cAAcC,UAAYC,MAC7DC,QAASJ,SAASC,cAAc,YAChCI,WAAYL,SAASC,cAAc,gBACnCK,WAAYN,SAASC,cAAc,UAInCM,EAAa,EAmBjB,SAASC,EAAKtB,GACV,IAAMuB,EAASvB,EAAKwB,KACE,IAAlBD,EAAOE,SACPd,gBAAM,wBAAwBe,MAAQ,QAS9C,SAAgB1B,GACZ,IAAM2B,EAAa3B,EAAK4B,QAAO,SAACC,EAAKC,GACjC,OACID,EAAG,0DAGHC,EAAGC,aAHA,iBAG6BD,EAAGE,cAHhC,wHAObF,EAAGG,MAPU,6EAWbH,EAAGI,MAXU,0EAebJ,EAAGK,SAfU,iFAmBbL,EAAGM,UAnBU,kCAyBR,IACHxB,EAAKM,QAAQmB,mBAAmB,YAAaV,GApC7CW,CAAOf,GACPX,EAAKQ,WAAWmB,UAAUC,IAAI,WAC1BnB,EAAa,GAsCjBoB,OAAOC,SAAS,EAAyB,GAArBD,OAAOE,aA9D/B/B,EAAKQ,WAAWwB,iBAAiB,SAiEjC,WACIvB,IACAwB,EAAI5C,EAAWoB,EAAYC,MAlE/BV,EAAKO,WAAWyB,iBAAiB,QAASE,KAG1C,YAA6B,IAAVC,EAAU,EAAVA,OACXA,EAAOC,MAAMvB,OAAS,IAClBsB,EAAOC,OAAS/C,IAChBW,EAAKM,QAAQF,UAAY,GACzBK,EAAa,GAGjBpB,EAAY8C,EAAOC,MACnB3B,IACAwB,EAAI5C,EAAWoB,EAAYC,MAZyB,MAC5DV,EAAKM,QAAQ0B,iBAAiB,SAoE9B,YAA6B,IAAVG,EAAU,EAAVA,OACf,GAAIA,EAAOE,QAAQC,MAAO,CACLC,SAAA,aACAJ,EAAOE,QAAQC,MADf,MAGRE,Y","file":"main.38ae4347bbf4a723c6b3.js","sourcesContent":["var Handlebars = require(\"../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<form class=\\\"search-form\\\" id=\\\"search-form\\\">\\r\\n    <input type=\\\"text\\\" name=\\\"query\\\" autocomplete=\\\"off\\\" placeholder=\\\"Search images...\\\" />\\r\\n</form>\\r\\n\\r\\n<ul class=\\\"gallery\\\">\\r\\n\\r\\n</ul>\";\n},\"useData\":true});","import form from './form.hbs';\nimport './index.css';\nimport '../node_modules/basiclightbox/dist/basicLightbox.min.css';\nimport api from './apiService.js';\nimport debounce from 'lodash.debounce';\nimport { error } from '@pnotify/core';\nimport '@pnotify/core/dist/PNotify.css';\nimport '@pnotify/core/dist/BrightTheme.css';\nimport * as basicLightbox from '../node_modules/basiclightbox/dist/basicLightbox.min.js';\n\nconst refs = {\n    body: document.querySelector('body'),\n    container: (document.querySelector('.container').innerHTML = form()),\n    gallery: document.querySelector('.gallery'),\n    searchForm: document.querySelector('#search-form'),\n    loadButton: document.querySelector('.load'),\n};\n\nlet queryText;\nlet numberPage = 0;\n\nrefs.loadButton.addEventListener('click', loadMore);\nrefs.searchForm.addEventListener('input', debounce(onInput, 500));\nrefs.gallery.addEventListener('click', goModal);\n\nfunction onInput({ target }) {\n    if (target.value.length > 0) {\n        if (target.value != queryText) {\n            refs.gallery.innerHTML = '';\n            numberPage = 0;\n        }\n\n        queryText = target.value;\n        numberPage++;\n        api(queryText, numberPage, toDo);\n    }\n}\n\nfunction toDo(data) {\n    const images = data.hits;\n    if (images.length === 0) {\n        error('Enter correct query!').delay = '2000';\n    }\n    markup(images);\n    refs.loadButton.classList.add('visible');\n    if (numberPage > 1) {\n        scroll();\n    }\n}\n\nfunction markup(data) {\n    const markupList = data.reduce((acc, el) => {\n        return (\n            acc +\n            `<li class=\"item\">\n<div class=\"photo-card\">\n<img src=\"${el.webformatURL}\" data-large=\"${el.largeImageURL}\" alt=\"\" data-action=\"photo\"/>\n<div class=\"stats\">\n<p class=\"stats-item\">\n<i class=\"material-icons\">thumb_up</i>\n${el.likes}\n</p>\n<p class=\"stats-item\">\n<i class=\"material-icons\">visibility</i>\n${el.views}\n</p>\n<p class=\"stats-item\">\n<i class=\"material-icons\">comment</i>\n${el.comments}\n</p>\n<p class=\"stats-item\">\n<i class=\"material-icons\">cloud_download</i>\n${el.downloads}\n</p>\n</div>\n</div>\n</li>`\n        );\n    }, '');\n    refs.gallery.insertAdjacentHTML('beforeend', markupList);\n}\n\nfunction scroll() {\n    window.scrollBy(0, -window.innerHeight * 3);\n}\n\nfunction loadMore() {\n    numberPage++;\n    api(queryText, numberPage, toDo);\n}\n\nfunction goModal({ target }) {\n    if (target.dataset.large) {\n        const instance = basicLightbox.create(\n            `<img src=\"${target.dataset.large}\">`,\n        );\n        instance.show();\n    }\n}","const KEY = '17830816-9b8531d259e8c45339bfe655c';\r\nconst SEARCH =\r\n    'https://pixabay.com/api/?image_type=photo&orientation=horizontal&';\r\nconst PER_PAGE = 12;\r\n\r\nexport default function(search, currentPage, callback) {\r\n    const URL =\r\n        SEARCH +\r\n        'page=' +\r\n        currentPage +\r\n        '&q=' +\r\n        search +\r\n        '&per_page=' +\r\n        PER_PAGE +\r\n        '&key=' +\r\n        KEY;\r\n    fetch(URL)\r\n        .then(response => response.json())\r\n        .then(data => callback(data))\r\n        .catch(error => error);\r\n}"],"sourceRoot":""}